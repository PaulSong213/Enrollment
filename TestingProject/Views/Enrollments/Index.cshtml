<style>
  
.main-body {
    padding: 15px;
}
.card {
    box-shadow: 0 1px 3px 0 rgba(0,0,0,.1), 0 1px 2px 0 rgba(0,0,0,.06);
}

.card {
    position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #fff;
    background-clip: border-box;
    border: 0 solid rgba(0,0,0,.125);
    border-radius: .25rem;
}

.card-body {
    flex: 1 1 auto;
    min-height: 1px;
    padding: 1rem;
}

.gutters-sm {
    margin-right: -8px;
    margin-left: -8px;
}

.gutters-sm>.col, .gutters-sm>[class*=col-] {
    padding-right: 8px;
    padding-left: 8px;
}
.mb-3, .my-3 {
    margin-bottom: 1rem!important;
}

.bg-gray-300 {
    background-color: #e2e8f0;
}
.h-100 {
    height: 100%!important;
}
.shadow-none {
    box-shadow: none!important;
}
</style>

@model EnrollmentSystem.Models.EnrollmentsModel
@{
    ViewBag.Title = "Enrollments";
    Layout = "~/Views/Shared/Registrar_Layout.cshtml";
    
    string url = HttpContext.Current.Request.Url.AbsoluteUri;
    Uri myUri = new Uri(url);
    string enrollmentType = HttpUtility.ParseQueryString(myUri.Query).Get("type");
    string domainName = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority);
}



@if (TempData["MessageResult"] != null)
{
    <div class="alert alert-primary">
        @TempData["MessageResult"]
    </div>
}

@if (TempData["ErrorResult"] != null)
{
    <div class="alert alert-danger">
        @TempData["ErrorResult"]
    </div>
}



<section class="row pb-5 w-100 overflow-auto bg-white">
   <div class="d-flex justify-content-between py-3">
        <h3>@ViewBag.Title</h3>
   </div>
   <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active @(enrollmentType == null ? "bg-success text-white" :  "" ) " href="/Enrollments">Regular</a>
      </li>
      <li class="nav-item mx-1">
        <a class="nav-link active @(enrollmentType == "incoming" ? "bg-success text-white" :  "" ) " href="/Enrollments?type=incoming">Incoming</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active @(enrollmentType == "irregular" ? "bg-success text-white" :  "" ) " href="/Enrollments?type=irregular">Irregular</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active @(enrollmentType == "transferee" ? "bg-success text-white" :  "" ) " href="/Enrollments?type=transferee">Transferee</a>
      </li>
  </ul> 
   <div class="w-100 overflow-auto px-3 py-4 ">
        <table id="dataTable" class="table table-striped" style="width:100%"> </table>
    </div>
</section>
@section scripts{
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
 <script>
    $(document).ready(function() {
        var fullEnrollmentsData = '@ViewBag.Enrollments';
        var fullEnrollments = JSON.parse(fullEnrollmentsData.replace(/&quot;/g,'"'));
        console.log(fullEnrollments);
    
        var enrollmentsPreviewData = '@ViewBag.EnrollmentPreviews';
        var enrollments = JSON.parse(enrollmentsPreviewData.replace(/&quot;/g,'"'));
        for(var i = 0; i < enrollments.length; i++){
            let enrollment = enrollments[i];
            enrollments[i] = Object.keys(enrollment).map((key) => enrollment[key]);
        }
    
        var courseTable = $('#dataTable').DataTable( {
            responsive: true,
            data: enrollments,
            columns: [
                { title: "ID" },
                { title: "Student ID" },
                { title: "Course" },
                { title: "", "defaultContent": "<button class='evaluateItem btn btn-primary'>Evaluate</button>" }
            ],
            "fnRowCallback": function(nRow, aData, iDisplayIndex) {
              nRow.setAttribute('id',aData[0]);
              },
           
        });
         
        $(".evaluateItem").on('click', function(event){
            
            let itemId = $(this).closest('tr').attr('id');
            $(this).attr('id',  "btn" + itemId);
            
            let selectedEnrollment = findEnrollmentById(itemId);
            
            console.log(selectedEnrollment);
            
            var yearLevelTemplate = "";
    
            if(selectedEnrollment.Type != 'incoming')yearLevelTemplate = `
                                                <h4>
                                                    <span class="mx-1"> Year Level: </span>
                                                    <span class="mx-1"> ${selectedEnrollment.Year} </span>
                                                </h4>`;
    
            var studentsPersonalData = `
                <div class="container">
                    <div class="main-body">
                          <div class="row gutters-sm">
                             <div class="col-md-4 mb-3">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex flex-column align-items-center text-center">
                                            <img src="/images/${selectedEnrollment.studentsModel.ProfileFileName}" alt="  ${selectedEnrollment.studentsModel.FirstName} " class="rounded-circle border border-secondary" height="150" width="150">
                                            <div class="mt-3">
                                                ${
                                                    yearLevelTemplate
                                                }
                                                <h6>
                                                    <span class="mx-1"> Student Id: </span>
                                                    <span class="mx-1"> ${selectedEnrollment.StudentId} </span>
                                                </h6>
                                                <h6 class="text-secondary mb-1 text-capitalize">${selectedEnrollment.Type} Student</h6>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-8">
                                <div class="card mb-3">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">First Name</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                ${selectedEnrollment.studentsModel.FirstName}
                                            </div>
                                        </div>
                                        <hr>

                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">Middle Name</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                @Session["userMiddleName"]
                                                ${selectedEnrollment.studentsModel.MiddleName}
                                            </div>
                                        </div>
                                        <hr>

                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">Last Name</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                ${selectedEnrollment.studentsModel.LastName}
                                                
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">Email</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                ${selectedEnrollment.studentsModel.Email}
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">Gender</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">

                                                ${selectedEnrollment.studentsModel.Gender}
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">Contact number</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                ${selectedEnrollment.studentsModel.ContactNumber}
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">Address</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                ${selectedEnrollment.studentsModel.Address}
                                            </div>
                                        </div>
                                        <hr>
    

                                    </div>
                                </div>
                    </div>
                </div>
            `;
    
        var documentData = "";
    
    
        switch(selectedEnrollment.Type) {
           
            case "transferee":
                var honorableDismissalFileName = selectedEnrollment.honorableDismissalFileName;
                var certificateOfTransferFileName = selectedEnrollment.certificateOfTransferFileName;
                var ReportCardFileName = selectedEnrollment.ReportCardFileName;
                var birthCertificateFileName = selectedEnrollment.birthCertificateFileName;
    
                var emptyField = `<h5 class="text-warning">Student did not submit a file in this field</h5>`;
                var honorableDismissalImage = honorableDismissalFileName ? `<img class="w-100" src="/images/${honorableDismissalFileName}" alt="Certificate of grades image" />` : emptyField ;
                var certificateOfTransferImage = GoodMoralCertificateFileName ? `<img class="w-100" src="/images/${certificateOfTransferFileName}" alt="Certificate of grades image" />` : emptyField ;
                var reportCardImage = ReportCardFileName ? `<img class="w-100" src="/images/${ReportCardFileName}" alt="Certificate of grades image" />` : emptyField ;
                var birthCertificateImage = birthCertificateFileName ? `<img class="w-100" src="/images/${birthCertificateFileName}" alt="Certificate of grades image" />` : emptyField ;
                                  
                documentData = `
                     <div class="col-12">
                      <section class="row gutters-sm">
    
                        <div class="col-sm-6 mb-3" >
                          <div class="card h-100">
                            <div class="card-body">
                              <div class="d-flex justify-content-between">
                                <h4 class="d-flex align-items-center d-block my-auto">
                                    Form 137
                                 </h4>
                                <button class="btn btn-secondary"
                                    style="transform: scale(75%)"
                                    onClick="(function (){
                                        var fileName = '${ReportCardFileName}';
                                        if(!fileName)return;
                                        var itemId = 'btn${itemId}';
                                        
                                        Swal.fire({
                                          imageUrl: '/images/${ReportCardFileName}',
                                          imageWidth: 900,
                                          width: 900,
                                          imageAlt: 'Report Card',
                                          willClose : ()=> {
                                            document.getElementById(itemId).click();
                                          }
                                        });
                                    })();return false;"
                                >
                                    View larger size
                                </button>
                              </div>
                                ${reportCardImage}
                                
                              </div>
                            </div>
                          </div>
    
                        <div class="col-sm-6 mb-3" >
                          <div class="card h-100">
                            <div class="card-body">
                              <div class="d-flex justify-content-between">
                                <h4 class="d-flex align-items-center d-block my-auto">
                                    Birth Certificate
                                 </h4>
                                <button class="btn btn-secondary"
                                    style="transform: scale(75%)"
                                    onClick="(function (){
                                        var fileName = '${birthCertificateFileName}';
                                        if(!fileName)return;
                                        var itemId = 'btn${itemId}';
                                        
                                        Swal.fire({
                                          imageUrl: '/images/${birthCertificateFileName}',
                                          imageWidth: 900,
                                          width: 900,
                                          imageAlt: 'birthCertificateFileName',
                                          willClose : ()=> {
                                            document.getElementById(itemId).click();
                                          }
                                        });
                                    })();return false;"
                                >
                                    View larger size
                                </button>
                              </div>
                                ${birthCertificateImage}
                                
                              </div>
                            </div>
                          </div>

                        <div class="col-sm-6 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <div class="d-flex justify-content-between">
                                <h4 class="d-flex align-items-center d-block my-auto">
                                    Certificate Of Transfer
                                 </h4>
                                <button class="btn btn-secondary"
                                    style="transform: scale(75%)"
                                    onClick="(function (){
                                        var fileName = '${certificateOfTransferFileName}';
                                        if(!fileName)return;
                                        var itemId = 'btn${itemId}';
                                        
                                        Swal.fire({
                                          imageUrl: '/images/${certificateOfTransferFileName}',
                                          imageWidth: 900,
                                          width: 900,
                                          imageAlt: 'certificateOfTransferFileName',
                                          willClose : ()=> {
                                            document.getElementById(itemId).click();
                                          }
                                        });
                                    })();return false;"
                                >
                                    View larger size
                                </button>
                              </div>
                                ${certificateOfTransferImage}
                              </div>
                            </div>
                          </div>
                          
                          <div class="col-sm-6 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <div class="d-flex justify-content-between">
                                <h4 class="d-flex align-items-center d-block my-auto">
                                    Honorable Dismissal
                                 </h4>
                                <button class="btn btn-secondary"
                                    style="transform: scale(75%)"
                                    onClick="(function (){
                                        var fileName = '${honorableDismissalFileName}';
                                        if(!fileName)return;
                                        var itemId = 'btn${itemId}';
                                        
                                        Swal.fire({
                                          imageUrl: '/images/${honorableDismissalFileName}',
                                          imageWidth: 900,
                                          width: 900,
                                          imageAlt: 'honorableDismissalFileName',
                                          willClose : ()=> {
                                            document.getElementById(itemId).click();
                                          }
                                        });
                                    })();return false;"
                                >
                                    View larger size
                                </button>
                              </div>
                                ${honorableDismissalImage}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                
                            
                        </section>

                        

                        <div class="col-sm-12 my-4">
                          <div class="card h-100">
                            <div class="card-body">
                              <h4 class="d-flex align-items-center mb-3 text-success">
                                 Qualified Enrollment Form:
                              </h4>
                            <form method="POST" action="/Enrollments/Accept">
                                
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="section">Section</label>
                                    <select class="form-select" id="section" name="section">
                                      <option value="1">1</option>
                                      <option value="2">2</option>
                                      <option value="3">3</option>
                                    </select>
                              </div>
                                  <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="Additional">Additional Message</label>
                                    <textarea class="form-control" name="registrarMessage" style="height: 5rem" id="Additional" placeholder="Additional message to the student that will sent be to the email. (Example : about the requirements that needs to be followed) Optional." cols="3" rows="3"></textarea>
                                  </div>
                                    <input type="hidden" value="${selectedEnrollment.Id}" name="enrollmentId" />
                                    <input type="hidden" value="${selectedEnrollment.studentsModel.FirstName} ${selectedEnrollment.studentsModel.LastName}" name="studentName" />
                                    <input type="hidden" value="${selectedEnrollment.EmailRecipient}" name="emailRecipient" />
                                    
                                  <input type="submit"  value="Accept Enrollment Application" class="btn btn-success fs-5" />
                          </form>
                                </div>
                            </div>
                          </div>
                        </div>

                         <div class="col-sm-12 mt-5 mb-4">
                          <div class="card h-100">
                            <div class="card-body">
                              <h4 class="d-flex align-items-center mb-3 text-danger">
                                 Rejected Enrollment Form:
                              </h4>

                             <form method="POST" action="/Enrollments/Reject">
                                  <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="Additional">Reason of rejection:</label>
                                    <textarea required class="form-control" style="height: 5rem" name="registrarMessage" id="Additional" placeholder="Reason why the enrollment application was rejected" cols="3" rows="3"></textarea>
                                  </div>
                                  <input type="hidden" value="${selectedEnrollment.Id}" name="enrollmentId" />
                                   <input type="hidden" value="${selectedEnrollment.studentsModel.FirstName} ${selectedEnrollment.studentsModel.LastName}" name="studentName" />
                                   <input type="hidden" value="${selectedEnrollment.EmailRecipient}" name="emailRecipient" />
                                  <button class="btn btn-danger fs-5">Reject Enrollment Application</button>
                             </form>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                `;
    
                
            break;
    
            case "incoming":
                var BirthCertificateFileName = selectedEnrollment.BirthCertificateFileName;
                var GoodMoralCertificateFileName = selectedEnrollment.GoodMoralCertificateFileName;
                var ReportCardFileName = selectedEnrollment.ReportCardFileName;
                var emptyField = `<h5 class="text-warning">Student did not submit a file in this field</h5>`;
                var birthCertificateImage = BirthCertificateFileName ? `<img class="w-100" src="/images/${BirthCertificateFileName}" alt="Certificate of grades image" />` : emptyField ;
                var goodMoralCertificateImage = GoodMoralCertificateFileName ? `<img class="w-100" src="/images/${GoodMoralCertificateFileName}" alt="Certificate of grades image" />` : emptyField ;
                var reportCardImage = ReportCardFileName ? `<img class="w-100" src="/images/${ReportCardFileName}" alt="Certificate of grades image" />` : emptyField ;
                                  
                documentData = `
                     <div class="col-12">
                      <section class="row gutters-sm">
    
                        <div class="col-sm-6 mb-3" >
                          <div class="card h-100">
                            <div class="card-body">
                              <div class="d-flex justify-content-between">
                                <h4 class="d-flex align-items-center d-block my-auto">
                                    Form 137
                                 </h4>
                                <button class="btn btn-secondary"
                                    style="transform: scale(75%)"
                                    onClick="(function (){
                                        var fileName = '${ReportCardFileName}';
                                        if(!fileName)return;
                                        var itemId = 'btn${itemId}';
                                        
                                        Swal.fire({
                                          imageUrl: '/images/${ReportCardFileName}',
                                          imageWidth: 900,
                                          width: 900,
                                          imageAlt: 'Report Card',
                                          willClose : ()=> {
                                            document.getElementById(itemId).click();
                                          }
                                        });
                                    })();return false;"
                                >
                                    View larger size
                                </button>
                              </div>
                                ${reportCardImage}
                                
                              </div>
                            </div>
                          </div>

                        <div class="col-sm-6 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <div class="d-flex justify-content-between">
                                <h4 class="d-flex align-items-center d-block my-auto">
                                   Good Moral Certificate
                                 </h4>
                                <button class="btn btn-secondary"
                                    style="transform: scale(75%)"
                                    onClick="(function (){
                                        var fileName = '${GoodMoralCertificateFileName}';
                                        if(!fileName)return;
                                        var itemId = 'btn${itemId}';
                                        
                                        Swal.fire({
                                          imageUrl: '/images/${GoodMoralCertificateFileName}',
                                          imageWidth: 900,
                                          width: 900,
                                          imageAlt: 'GoodMoralCertificateFileName',
                                          willClose : ()=> {
                                            document.getElementById(itemId).click();
                                          }
                                        });
                                    })();return false;"
                                >
                                    View larger size
                                </button>
                              </div>
                                ${goodMoralCertificateImage}
                              </div>
                            </div>
                          </div>
                        </section>

                        <div class="col-sm-6 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <div class="d-flex justify-content-between">
                                <h4 class="d-flex align-items-center d-block my-auto">
                                    Birth Certificate
                                 </h4>
                                <button class="btn btn-secondary"
                                    style="transform: scale(75%)"
                                    onClick="(function (){
                                        var fileName = '${BirthCertificateFileName}';
                                        if(!fileName)return;
                                        var itemId = 'btn${itemId}';
                                        
                                        Swal.fire({
                                          imageUrl: '/images/${BirthCertificateFileName}',
                                          imageWidth: 900,
                                          width: 900,
                                          imageAlt: 'BirthCertificateFileName',
                                          willClose : ()=> {
                                            document.getElementById(itemId).click();
                                          }
                                        });
                                    })();return false;"
                                >
                                    View larger size
                                </button>
                              </div>
                                ${birthCertificateImage}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                        <div class="col-sm-12 my-4">
                          <div class="card h-100">
                            <div class="card-body">
                              <h4 class="d-flex align-items-center mb-3 text-success">
                                 Qualified Enrollment Form:
                              </h4>
                            <form method="POST" action="/Enrollments/Accept">
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="course">Course</label>
                                    <input type="text" class="form-control" name="course" disabled id="course" value="${selectedEnrollment.coursesModel.Name}" />
                                </div>
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="year">Course</label>
                                    <input type="text" class="form-control" name="year" disabled id="year" value="${selectedEnrollment.Year}" />
                                </div>
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="section">Section</label>
                                    <select class="form-select" id="section" name="section">
                                      <option value="1">1</option>
                                      <option value="2">2</option>
                                      <option value="3">3</option>
                                    </select>
                              </div>
                                  <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="Additional">Additional Message</label>
                                    <textarea class="form-control" name="registrarMessage" style="height: 5rem" id="Additional" placeholder="Additional message to the student that will sent be to the email. (Example : about the requirements that needs to be followed) Optional." cols="3" rows="3"></textarea>
                                  </div>
                                    <input type="hidden" value="${selectedEnrollment.Id}" name="enrollmentId" />
                                    <input type="hidden" value="${selectedEnrollment.studentsModel.FirstName} ${selectedEnrollment.studentsModel.LastName}" name="studentName" />
                                    <input type="hidden" value="${selectedEnrollment.EmailRecipient}" name="emailRecipient" />
                                    
                                    <input type="submit"  value="Accept Enrollment Application" class="btn btn-success fs-5" />
                          </form>
                                </div>
                            </div>
                          </div>
                        </div>

                         <div class="col-sm-12 mt-5 mb-4">
                          <div class="card h-100">
                            <div class="card-body">
                              <h4 class="d-flex align-items-center mb-3 text-danger">
                                 Rejected Enrollment Form:
                              </h4>

                             <form method="POST" action="/Enrollments/Reject">
                                  <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="Additional">Reason of rejection:</label>
                                    <textarea required class="form-control" style="height: 5rem" name="registrarMessage" id="Additional" placeholder="Reason why the enrollment application was rejected" cols="3" rows="3"></textarea>
                                  </div>
                                  <input type="hidden" value="${selectedEnrollment.Id}" name="enrollmentId" />
                                   <input type="hidden" value="${selectedEnrollment.studentsModel.FirstName} ${selectedEnrollment.studentsModel.LastName}" name="studentName" />
                                   <input type="hidden" value="${selectedEnrollment.EmailRecipient}" name="emailRecipient" />
                                  <button class="btn btn-danger fs-5">Reject Enrollment Application</button>
                             </form>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                `;
    
                
            break;
    
            case 'irregular':
                    
                    var ReportCardFileName = selectedEnrollment.ReportCardFileName;
                var emptyField = `<h5 class="text-warning">Student did not submit a file in this field</h5>`;
                var reportCardImage = ReportCardFileName ? `<img class="w-100" src="/images/${ReportCardFileName}" alt="Certificate of grades image" />` : emptyField ;
                      
                
                documentData = `
                     <div class="col-12">
                      <div class="row gutters-sm">
    
    
                        <div class="col-sm-6 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <div class="d-flex justify-content-between">
                                <h4 class="d-flex align-items-center d-block my-auto">
                                    Certificate of Grades
                                 </h4>
                                <button class="btn btn-secondary"
                                    style="transform: scale(75%)"
                                    onClick="(function (){
                                        var fileName = '${ReportCardFileName}';
                                        if(!fileName)return;
                                        var itemId = 'btn${itemId}';
                                        
                                        Swal.fire({
                                          imageUrl: '/images/${ReportCardFileName}',
                                          imageWidth: 900,
                                          width: 900,
                                          imageAlt: 'ReportCardFileName',
                                          willClose : ()=> {
                                            document.getElementById(itemId).click();
                                          }
                                        });
                                    })();return false;"
                                >
                                    View larger size
                                </button>
                              </div>
                                ${reportCardImage}
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="col-sm-12 my-4">
                          <div class="card h-100">
                            <div class="card-body">
                              <h4 class="d-flex align-items-center mb-3 text-success">
                                 Qualified Enrollment Form:
                              </h4>
                            <form method="POST" action="/Enrollments/Accept">
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="course">Course</label>
                                    <input type="text" class="form-control" name="course" disabled id="course" value="${selectedEnrollment.coursesModel.Name}" />
                                </div>
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="year">Course</label>
                                    <input type="text" class="form-control" name="year" disabled id="year" value="${selectedEnrollment.Year}" />
                                </div>
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="section">Section</label>
                                    <select class="form-select" id="section" name="section">
                                      <option value="1">1</option>
                                      <option value="2">2</option>
                                      <option value="3">3</option>
                                    </select>
                                </div>
                                  <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="Additional">Additional Message</label>
                                    <textarea class="form-control" name="registrarMessage" style="height: 5rem" id="Additional" placeholder="Additional message to the student that will sent be to the email. (Example : about the requirements that needs to be followed) Optional." cols="3" rows="3"></textarea>
                                  </div>
                                  <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="costumizedScheaduleLink">Costumized Scheadule Link</label>
                                    <input class="form-control" type="url" name="costumizedScheaduleLink" required id="costumizedScheaduleLink" placeholder"Enter Costumized Scheadule Link" />
                                  </div>
                                    <input type="hidden" value="${selectedEnrollment.Id}" name="enrollmentId" />
                                    <input type="hidden" value="${selectedEnrollment.studentsModel.FirstName} ${selectedEnrollment.studentsModel.LastName}" name="studentName" />
                                    <input type="hidden" value="${selectedEnrollment.EmailRecipient}" name="emailRecipient" />
                                      
                                <input type="submit"  value="Accept Enrollment Application" class="btn btn-success fs-5" />
                          </form>
                                </div>
                            </div>
                          </div>
                        </div>
    
                         <div class="col-sm-12 mt-5 mb-4">
                          <div class="card h-100">
                            <div class="card-body">
                              <h4 class="d-flex align-items-center mb-3 text-danger">
                                 Rejected Enrollment Form:
                              </h4>
    
                             <form method="POST" action="/Enrollments/Reject">
                                  <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="Additional">Reason of rejection:</label>
                                    <textarea required class="form-control" style="height: 5rem" name="registrarMessage" id="Additional" placeholder="Reason why the enrollment application was rejected" cols="3" rows="3"></textarea>
                                  </div>
                                  <input type="hidden" value="${selectedEnrollment.Id}" name="enrollmentId" />
                                   <input type="hidden" value="${selectedEnrollment.studentsModel.FirstName} ${selectedEnrollment.studentsModel.LastName}" name="studentName" />
                                   <input type="hidden" value="${selectedEnrollment.EmailRecipient}" name="emailRecipient" />
                                  <button class="btn btn-danger fs-5">Reject Enrollment Application</button>
                             </form>
    
    
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        
                      </div>
                    </div>

                `;
            
            break;
            
            default:
    
                var ReportCardFileName = selectedEnrollment.ReportCardFileName;
                var emptyField = `<h5 class="text-warning">Student did not submit a file in this field</h5>`;
                var reportCardImage = ReportCardFileName ? `<img class="w-100" src="/images/${ReportCardFileName}" alt="Certificate of grades image" />` : emptyField ;
                      
                
                documentData = `
                     <div class="col-12">
                      <div class="row gutters-sm">
    
    
                        <div class="col-sm-6 mb-3">
                          <div class="card h-100">
                            <div class="card-body">
                              <div class="d-flex justify-content-between">
                                <h4 class="d-flex align-items-center d-block my-auto">
                                    Certificate of Grades
                                 </h4>
                                <button class="btn btn-secondary"
                                    style="transform: scale(75%)"
                                    onClick="(function (){
                                        var fileName = '${ReportCardFileName}';
                                        if(!fileName)return;
                                        var itemId = 'btn${itemId}';
                                        
                                        Swal.fire({
                                          imageUrl: '/images/${ReportCardFileName}',
                                          imageWidth: 900,
                                          width: 900,
                                          imageAlt: 'ReportCardFileName',
                                          willClose : ()=> {
                                            document.getElementById(itemId).click();
                                          }
                                        });
                                    })();return false;"
                                >
                                    View larger size
                                </button>
                              </div>
                                ${reportCardImage}
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="col-sm-12 my-4">
                          <div class="card h-100">
                            <div class="card-body">
                              <h4 class="d-flex align-items-center mb-3 text-success">
                                 Qualified Enrollment Form:
                              </h4>
                            <form method="POST" action="/Enrollments/Accept">
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="course">Course</label>
                                    <input type="text" class="form-control" name="course" disabled id="course" value="${selectedEnrollment.coursesModel.Name}" />
                                </div>
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="year">Course</label>
                                    <input type="text" class="form-control" name="year" disabled id="year" value="${selectedEnrollment.Year}" />
                                </div>
                                <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="section">Section</label>
                                    <select class="form-select" id="section" name="section">
                                      <option value="1">1</option>
                                      <option value="2">2</option>
                                      <option value="3">3</option>
                                    </select>
                                </div>
                                  <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="Additional">Additional Message</label>
                                    <textarea class="form-control" name="registrarMessage" style="height: 5rem" id="Additional" placeholder="Additional message to the student that will sent be to the email. (Example : about the requirements that needs to be followed) Optional." cols="3" rows="3"></textarea>
                                  </div>
                                    <input type="hidden" value="${selectedEnrollment.Id}" name="enrollmentId" />
                                    <input type="hidden" value="${selectedEnrollment.studentsModel.FirstName} ${selectedEnrollment.studentsModel.LastName}" name="studentName" />
                                   <input type="hidden" value="${selectedEnrollment.EmailRecipient}" name="emailRecipient" />
                                    
                                  <input type="submit"  value="Accept Enrollment Application" class="btn btn-success fs-5" />
                          </form>
                                </div>
                            </div>
                          </div>
                        </div>
    
                         <div class="col-sm-12 mt-5 mb-4">
                          <div class="card h-100">
                            <div class="card-body">
                              <h4 class="d-flex align-items-center mb-3 text-danger">
                                 Rejected Enrollment Form:
                              </h4>
    
                             <form method="POST" action="/Enrollments/Reject">
                                  <div class="form-group mb-4">
                                    <label class="mb-1 text-left w-100" style="text-align: left" for="Additional">Reason of rejection:</label>
                                    <textarea required class="form-control" style="height: 5rem" name="registrarMessage" id="Additional" placeholder="Reason why the enrollment application was rejected" cols="3" rows="3"></textarea>
                                  </div>
                                  <input type="hidden" value="${selectedEnrollment.Id}" name="enrollmentId" />
                                   <input type="hidden" value="${selectedEnrollment.studentsModel.FirstName} ${selectedEnrollment.studentsModel.LastName}" name="studentName" />
                                   <input type="hidden" value="${selectedEnrollment.EmailRecipient}" name="emailRecipient" />
                                  <button class="btn btn-danger fs-5">Reject Enrollment Application</button>
                             </form>
    
    
                              </div>
                            </div>
                          </div>
                        </div>
                        
                        
                      </div>
                    </div>

                `;
        }
    
        studentsPersonalData+=documentData;
            
        Swal.fire({
                width: 1000,
                title: '<h2 class="my-3">Evaluate Enrollment Application</h2>',
                html: studentsPersonalData,
                showConfirmButton : false,
                allowOutsideClick: false,
                showCancelButton: true,
                cancelButtonText:'Cancel Evaluation',
                showCloseButton: true,
                
            })
        });
    
        
    
        
        function findEnrollmentById(id){
             for(var i = 0; i < fullEnrollments.length; i++){
                let enrollment = fullEnrollments[i];
                console.log(enrollment.Id);
                console.log(id);
                if(enrollment.Id == id)return enrollment;
            }
        }
    
    } );
    
    
 </script>
}



